{
    "@context": [
      "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/handlersjs-core/^0.0.0/components/context.jsonld",
      "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/handlersjs-http/^0.0.0/components/context.jsonld",
      "https://linkedsoftwaredependencies.org/bundles/npm/@laurensdeb/authorization-agent-uma/^1.0.0/components/context.jsonld",
      "https://linkedsoftwaredependencies.org/bundles/npm/@laurensdeb/authorization-agent-http/^1.0.0/components/context.jsonld"
    ],
    "@graph": [
        {
            "@id": "urn:authorization-agent:default:GetOperation",
            "@type": "HttpHandlerOperation",
            "method": "GET",
            "publish": true
        },
        {
            "@id": "urn:authorization-agent:default:PostOperation",
            "@type": "HttpHandlerOperation",
            "method": "POST",
            "publish": true
        },
        {
            "@id": "urn:authorization-agent:default:DefaultKeyholder",
            "@type": "InMemoryJwksKeyHolder",
            "alg": "ES256"
        },
        {
            "@id": "urn:authorization-agent:default:NodeHttpServer",
            "@type": "NodeHttpServer",
            "port": { "@id": "urn:authorization-agent:variables:port" },
            "host": { "@id": "urn:authorization-agent:variables:host"},
            "nodeHttpStreamsHandler": {
                "@id": "urn:authorization-agent:default:NodeHttpRequestResponseHandler",
                "@type": "NodeHttpRequestResponseHandler",
                "httpHandler": {
                    "@id": "urn:authorization-agent:default:RoutedHttpRequestHandler",
                    "@type": "RoutedHttpRequestHandler",
                    "handlerControllerList": [
                        {
                            "@id": "urn:authorization-agent:default:HttpHandlerController",
                            "@type": "HttpHandlerController",
                            "label": "ControllerList",
                            "routes": [
                                {
                                    "@id": "urn:authorization-agent:default:UmaConfigRoute",
                                    "@type": "HttpHandlerRoute",
                                    "operations": [
                                        {
                                            "@id": "urn:authorization-agent:default:GetOperation"
                                        }
                                    ],
                                    "handler": {
                                      "@type": "UmaConfigRequestHandler"
                                    },
                                    "path": "/.well-known/uma2-configuration"
                                },
                                {
                                    "@id": "urn:authorization-agent:default:JwksRoute",
                                    "@type": "HttpHandlerRoute",
                                    "operations": [
                                        {
                                            "@id": "urn:authorization-agent:default:GetOperation"
                                        }
                                    ],
                                    "handler": {
                                      "@type": "JwksRequestHandler",
                                      "keyholder": {
                                         "@id": "urn:authorization-agent:default:DefaultKeyholder"
                                      }
                                    },
                                    "path": "/keys"
                                },
                                {
                                    "@id": "urn:authorization-agent:default:TokenRoute",
                                    "@type": "HttpHandlerRoute",
                                    "operations": [
                                        {
                                            "@id": "urn:authorization-agent:default:PostOperation"
                                        }
                                    ],
                                    "handler": {
                                      "@type": "JsonHttpErrorHandler",
                                      "nestedHandler": {
                                      "@type": "TokenRequestHandler",
                                      "processors": [{
                                          "@id": "urn:authorization-agent:default:UmaGrantProcessor",
                                          "@type": "UmaGrantProcessor",
                                          "ticketFactory": {
                                              "@type": "JwtTicketFactory",
                                              "params_expirationTime": "5m",
                                              "issuer": {"@id": "urn:authorization-agent:variables:baseUrl"},
                                              "keyholder": {"@id": "urn:authorization-agent:default:DefaultKeyholder"} 
                                          },
                                          "tokenFactory": {
                                              "@type": "JwtTokenFactory",
                                              "params_expirationTime": "5m",
                                              "params_aud": "solid",
                                              "issuer": {"@id": "urn:authorization-agent:variables:baseUrl"},
                                              "keyholder": {"@id": "urn:authorization-agent:default:DefaultKeyholder"} 
                                          },
                                          "claimTokenProcessors": [{
                                              "@type": "DpopClaimTokenProcessor"
                                          }],
                                          "authorizers": [{"@type": "AllAuthorizer"}]
                                      }]
                                      }
                                    },
                                    "path": "/token"
                                }
                            ]
                        }
                    ],
                    "defaultHandler": {
                        "@type": "MockHttpHandler"
                    }
                }
            }
        
        }
    ]
}